---
import '@fontsource/space-grotesk'
import { type Event } from '../../types/calendar'
import { getDayNumberFromDate, getMonthFromDate } from '../../utils/date'
interface Props {
	event: Event
}

const { event } = Astro.props

const day = String(getDayNumberFromDate({ date: event.dates.race })).padStart(2, '0')
const month = getMonthFromDate({ date: event.dates.race })
const hasSprint = Object.keys(event.dates).includes('sprint')

const backgroundColorState = {
	canceled: 'bg-red',
	schedule: 'bg-orange text-black',
	finished: 'bg-lemon text-black'
}
---

<a
	href={`calendar/${event.circuitId}`}
	class='flex flex-row justify-between py-3 px-4 rounded-2xl font-bold min-w-[360px] md:min-w-full bg-gray hover:bg-white hover:text-black'
>
	<div class='flex flex-col gap-2'>
		<span class='text-2xl uppercase' transition:name='event-name'>{event.shortName}</span>
		{event.dates.race && <span>{event.fallbackDate}</span>}
		<span class='text-sm opacity-40'>{hasSprint ? 'Sprint' : ''}</span>
	</div>

	<span
		class={`capitalize ${backgroundColorState[event.state]} py-1 px-2 text-sm h-fit self-center`}
		>{event.state}</span
	>
</a>
