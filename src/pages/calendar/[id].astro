---
import Layout from '../../layouts/Layout.astro'
import { readDBFile } from '../../../db'
import type { Event } from '../../../types/calendar.ts'

export async function getStaticPaths() {
	const events = (await readDBFile('schedule')) as Event[]

	const eventPaths = events.map((event) => ({
		params: { id: event.circuitId, event: event.name }
	}))

	return eventPaths
}

const { id, event } = Astro.params
const events = (await readDBFile('schedule')) as Event[]
const eventInfo = events.find((event) => event.circuitId === id)
---

<Layout
	tabTitle={`Schedule for ${eventInfo.shortName} | Welcome to the Formula Fan Page`}
	titlePage={`Schedule for ${eventInfo.name}`}
>
	<span>{id}</span>
	<p>Here is the schedule for {event} in construction</p>
</Layout>
